{"version":3,"sources":["component/status/SlotUnavailableOverlay.tsx","component/status/equipment/EquipmentItemView.tsx","component/status/equipment/EquipmentPlaceholder.tsx","state/equipment/availableEquipment.ts","component/status/equipment/EquipmentSelector.tsx"],"names":["SlotUnavailableOverlay","React","memo","show","availableLv","t","useTranslation","ifTruthy","css","display","flexDirection","alignItems","justifyContent","position","inset","backgroundColor","height","width","color","fontWeight","EquipmentItemView","equipmentId","equipmentType","equipmentRank","enhancementLv","Image","fluid","rounded","draggable","sizes","alt","src","process","top","left","right","fontSize","textShadow","join","EquipmentPlaceholder","type","opacity","filterEquipment","unit","equipment","matchExclusive","chipEquipment","constSelector","Object","values","equipmentData","filter","e","EquipmentType","Chip","osEquipment","Os","gearEquipment","Gear","availableChipEquipmentState","selectorFamily","key","get","availableOsEquipmentState","availableGearEquipmentState","useAvailableEquipment","slot","useRecoilValue","no","EquipmentItem","eventKey","active","label","others","Dropdown","Item","className","RemoveEquipmentItem","EquipmentSelectorMenu","value","items","Menu","equipped","id","map","item","EquipmentSlotUnavailableOverlay","useEquipmentAvailable","available","EquipmentToggle","forwardRef","ref","onClick","children","href","preventDefault","EquipmentDropdown","onSelect","find","undefined","Toggle","as","rank","enhanceLv","Chip1EquipmentDropdown","useUnitEquipment","equip","Chip2EquipmentDropdown","OsEquipmentDropdown","GearEquipmentDropdown","EquipmentSelector","selected","useSelectedUnit","ifNonNullable"],"mappings":"0IAAA,4DAcMA,EAGDC,IAAMC,MAAK,YAA4B,IAAzBC,EAAwB,EAAxBA,KAAMC,EAAkB,EAAlBA,YACfC,EAAMC,cAAND,EAER,OACEE,YACEJ,EACC,oBACCK,IAAK,CACHC,QAAS,cACTC,cAAe,SACfC,WAAY,SACZC,eAAgB,SAChBC,SAAU,WACVC,MAAO,EACPC,gBAAiB,wBAEnB,YAAC,IAAD,CAASP,IAAK,CAAEQ,OAAQ,GAAIC,MAAO,KACjC,YAAC,IAAD,OAEF,oBAAMT,IAAK,CAAEU,MAAO,OAAQC,WAAY,SACrCd,EAAE,MADL,OACkBD,QAOXJ,O,2ICcAoB,EA3CV,SAAC,GAAkE,IAAhEC,EAA+D,EAA/DA,YAAaC,EAAkD,EAAlDA,cAAeC,EAAmC,EAAnCA,cAAeC,EAAoB,EAApBA,cACzCnB,EAAMC,cAAND,EAER,OACE,oBAAMG,IAAK,CAAEK,SAAU,WAAYJ,QAAS,iBAC1C,YAACgB,EAAA,EAAD,CACEC,OAAK,EACLC,SAAO,EACPC,UAAU,QACVC,MAAM,mDACNC,IAAKzB,EAAE,aAAD,OAAcgB,IACpBU,IAAG,UAAKC,2BAAL,uBAA0CV,EAA1C,YAA2DD,EAA3D,YAA0EE,EAA1E,WAEL,YAACE,EAAA,EAAD,CACEG,UAAU,QACVpB,IAAK,CAAEK,SAAU,WAAYoB,KAAM,GAAIC,MAAO,GAC9ClB,OAAQ,GACRC,MAAO,GACPa,IAAG,UAAKzB,EAAE,kBAAD,OAAmBkB,IAAzB,YAA6ClB,EAAE,kBAAD,OAAmBiB,KACpES,IAAG,UAAKC,2BAAL,iBAAoCV,EAApC,YAAqDC,EAArD,WAEL,oBACEf,IAAK,CACHK,SAAU,WACVoB,KAAM,EACNE,MAAO,EACPjB,MAAO,OACPkB,SAAU,QACVjB,WAAY,OACZkB,WAAY,CACV,uCACA,wCACA,uCACA,wCACAC,SAbN,IAgBId,KChBKe,EA1BiDtC,IAAMC,MAAK,YAAe,IAAZsC,EAAW,EAAXA,KACpEnC,EAAMC,cAAND,EAER,OACE,oBACEG,IAAK,CACHC,QAAS,cACTG,eAAgB,SAChBD,WAAY,SACZK,OAAQ,OACRC,MAAO,OACPwB,QAAS,KAGX,YAAChB,EAAA,EAAD,CACEE,SAAO,EACPC,UAAU,QACVZ,OAAQ,GACRC,MAAO,GACPa,IAAKzB,EAAE,kBAAD,OAAmBmC,IACzBT,IAAG,UAAKC,2BAAL,6BAAgDQ,EAAhD,e,yCCdX,SAASE,EAAgBC,GACvB,OAAO,SAAkCC,GACvC,OAAOC,YAAeF,EAAMC,IAIhC,IAAME,EAAgBC,YACpBC,OAAOC,OAAOC,KAAeC,QAAO,SAAAC,GAAC,OAAIA,EAAEZ,OAASa,IAAcC,SAG9DC,EAAcR,YAClBC,OAAOC,OAAOC,KAAeC,QAAO,SAAAC,GAAC,OAAIA,EAAEZ,OAASa,IAAcG,OAG9DC,EAAgBV,YACpBC,OAAOC,OAAOC,KAAeC,QAAO,SAAAC,GAAC,OAAIA,EAAEZ,OAASa,IAAcK,SAG9DC,EAA8BC,YAAgD,CAClFC,IAAK,8BACLC,IAAK,SAACnB,GAAD,OAAU,mBAAamB,EAAb,EAAGA,KAAchB,GAAeK,OAAOT,EAAgBC,QAGlEoB,EAA4BH,YAA8C,CAC9EC,IAAK,4BACLC,IAAK,SAACnB,GAAD,OAAU,mBAAamB,EAAb,EAAGA,KAAcP,GAAaJ,OAAOT,EAAgBC,QAGhEqB,EAA8BJ,YAAgD,CAClFC,IAAK,8BACLC,IAAK,SAACnB,GAAD,OAAU,mBAAamB,EAAb,EAAGA,KAAcL,GAAeN,OAAOT,EAAgBC,QAMjE,SAASsB,EAAsBtB,EAAqBuB,GACzD,OAAQA,GACR,IAAK,QACL,IAAK,QACH,OAAOC,YAAeR,EAA4BhB,EAAKyB,KACzD,IAAK,KACH,OAAOD,YAAeJ,EAA0BpB,EAAKyB,KACvD,IAAK,OACH,OAAOD,YAAeH,EAA4BrB,EAAKyB,M,kHCXrDC,EAKD,SAAC,GAAiD,IAA/CC,EAA8C,EAA9CA,SAAUC,EAAoC,EAApCA,OAAQC,EAA4B,EAA5BA,MAAOzC,EAAqB,EAArBA,IAAQ0C,EAAa,iBACpD,OACE,YAACC,EAAA,EAASC,KAAV,eACMF,EADN,CAEEG,UAAU,YACVN,SAAUA,EACVC,OAAQA,IAER,YAAC9C,EAAA,EAAD,CACEG,UAAU,QACVZ,OAAQ,GACRC,MAAO,GACPa,IAAK0C,EACLzC,IAAKA,IAEP,oBAAM6C,UAAU,SAASJ,KAKzBK,EAGD,SAAC,GAAiC,IAA/BN,EAA8B,EAA9BA,OAAQ/B,EAAsB,EAAtBA,KAASiC,EAAa,iBAC5BpE,EAAMC,cAAND,EAER,OACE,YAAC,EAAD,eACMoE,EADN,CAEEF,OAAQA,EACRC,MAAOnE,EAAE,2BACT0B,IAAG,UAAKC,2BAAL,6BAAgDQ,EAAhD,aAKHsC,EAAwB,YAE0C,IADpEtC,EACmE,EADnEA,KAAMuC,EAC6D,EAD7DA,MAAOC,EACsD,EADtDA,MAAUP,EAC4C,iBAC7DpE,EAAMC,cAAND,EAER,OACE,YAACqE,EAAA,EAASO,KAAV,eAAmBR,EAAnB,CAA2BG,UAAU,cACnC,mBAAKA,UAAU,uBACb,YAAC,EAAD,CAAqBpC,KAAMA,EAAM+B,SAAQ,OAACQ,QAAD,IAACA,OAAD,EAACA,EAAOG,SAASC,MACzDH,EAAMI,KAAI,SAAAC,GAAI,OACb,YAAC,EAAD,CACExB,IAAKwB,EAAKF,GACVb,SAAUe,EAAKF,GACfZ,OAAQc,EAAKF,MAAL,OAAYJ,QAAZ,IAAYA,OAAZ,EAAYA,EAAOG,SAASC,IACpCX,MAAOnE,EAAE,aAAD,OAAcgF,EAAKF,KAC3BpD,IAAG,UAAKC,2BAAL,uBAA0CqD,EAAK7C,KAA/C,YAAuD6C,EAAKF,GAA5D,oBAQTG,EAA0F,SAAC,GAAoB,IAAlB3C,EAAiB,EAAjBA,KAAMuB,EAAW,EAAXA,KACvG,EAAiCqB,YAAsB5C,EAAMuB,GAA7D,mBAAOsB,EAAP,KAAkBpF,EAAlB,KACA,OAAQ,YAACJ,EAAA,EAAD,CAAwBG,MAAOqF,EAAWpF,YAAaA,KAG3DqF,EAAkBxF,IAAMyF,YAO5B,WAA4BC,GAA5B,IAAGC,EAAH,EAAGA,QAAST,EAAZ,EAAYA,GAAIU,EAAhB,EAAgBA,SAAhB,OACA,iBACEC,KAAK,GACLH,IAAKA,EACLR,GAAIA,EACJS,QAAS,SAACxC,GACRA,EAAE2C,iBACFH,EAAQxC,KAGTyC,MAICG,EAAoB,YAEY,IADlCb,EACiC,EADjCA,GAAIxC,EAC6B,EAD7BA,KAAMuB,EACuB,EADvBA,KAAM1B,EACiB,EADjBA,KAAMuC,EACW,EADXA,MAAOkB,EACI,EADJA,SAAUjB,EACN,EADMA,MAEzC,OACE,YAACN,EAAA,EAAD,CACEE,UAAU,iBACVqB,SAAU,SAAC3B,GACT,GAAIA,EAAU,CACZ,IAAMe,EAAOL,EAAMkB,MAAK,SAACb,GAAD,OAA4BA,EAAKF,KAAOb,KAChEe,GAAQY,EAASZ,QAEjBY,OAASE,KAIb,YAACzB,EAAA,EAAS0B,OAAV,CAAiBC,GAAIZ,EAAiBN,GAAIA,GACxC,oBAAMP,UAAU,yBACbG,EACE,YAAC,EAAD,CACC1D,YAAa0D,EAAMG,SAASC,GAC5B7D,cAAekB,EACfjB,cAAewD,EAAMuB,KACrB9E,cAAeuD,EAAMwB,YAEvB,YAAC,EAAD,CAAsB/D,KAAMA,IAC9B,YAAC,EAAD,CAAiCG,KAAMA,EAAMuB,KAAMA,MAGvD,YAAC,EAAD,CAAuB1B,KAAMA,EAAMuC,MAAOA,EAAOC,MAAOA,MAKxDwB,EAA4D,SAAC,GAAc,IAAZ7D,EAAW,EAAXA,KAC7DqC,EAAQf,EAAsBtB,EAAM,SAC1C,EAAiC8D,YAAiB9D,EAAM,SAAxD,mBAAOH,EAAP,KAAaI,EAAb,KAAwB8D,EAAxB,KACA,OACE,YAAC,EAAD,CACEvB,GAAG,2BACHxC,KAAMA,EACNuB,KAAK,QACL1B,KAAMA,EACNuC,MAAOnC,EACPqD,SAAUS,EACV1B,MAAOA,KAKP2B,EAA4D,SAAC,GAAc,IAAZhE,EAAW,EAAXA,KAC7DqC,EAAQf,EAAsBtB,EAAM,SAC1C,EAAiC8D,YAAiB9D,EAAM,SAAxD,mBAAOH,EAAP,KAAaI,EAAb,KAAwB8D,EAAxB,KACA,OACE,YAAC,EAAD,CACEvB,GAAG,2BACHxC,KAAMA,EACNuB,KAAK,QACL1B,KAAMA,EACNuC,MAAOnC,EACPqD,SAAUS,EACV1B,MAAOA,KAKP4B,EAAyD,SAAC,GAAc,IAAZjE,EAAW,EAAXA,KAC1DqC,EAAQf,EAAsBtB,EAAM,MAC1C,EAAiC8D,YAAiB9D,EAAM,MAAxD,mBAAOH,EAAP,KAAaI,EAAb,KAAwB8D,EAAxB,KACA,OACE,YAAC,EAAD,CACEvB,GAAG,wBACHxC,KAAMA,EACNuB,KAAK,KACL1B,KAAMA,EACNuC,MAAOnC,EACPqD,SAAUS,EACV1B,MAAOA,KAKP6B,EAA2D,SAAC,GAAc,IAAZlE,EAAW,EAAXA,KAC5DqC,EAAQf,EAAsBtB,EAAM,QAC1C,EAAiC8D,YAAiB9D,EAAM,QAAxD,mBAAOH,EAAP,KAAaI,EAAb,KAAwB8D,EAAxB,KACA,OACE,YAAC,EAAD,CACEvB,GAAG,0BACHxC,KAAMA,EACNuB,KAAK,OACL1B,KAAMA,EACNuC,MAAOnC,EACPqD,SAAUS,EACV1B,MAAOA,KAqBE8B,UAhB8C,SAAC,GAAc,IAAZ5C,EAAW,EAAXA,KACxD6C,EAAWC,cAEjB,OAAOC,YACLF,GACA,SAAApE,GACE,OAAQuB,GACR,IAAK,QAAS,OAAQ,YAAC,EAAD,CAAwBvB,KAAMA,IACpD,IAAK,QAAS,OAAQ,YAAC,EAAD,CAAwBA,KAAMA,IACpD,IAAK,KAAS,OAAQ,YAAC,EAAD,CAAqBA,KAAMA,IACjD,IAAK,OAAS,OAAQ,YAAC,EAAD,CAAuBA,KAAMA","file":"static/js/4.6067cb70.chunk.js","sourcesContent":["/** @jsxRuntime classic */\n/** @jsx jsx */\nimport { jsx } from '@emotion/react';\nimport React from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport SVGIcon from '../icon/SVGIcon';\nimport { LockClosed } from '../icon/FluentIcons';\n\nimport { CoreLinkSlotAvailableLv } from '../../domain/UnitCoreLink';\nimport { EquipmentSlotAvailableLv } from '../../domain/status/UnitEquipment';\n\nimport { ifTruthy } from '../../util/react';\n\nconst SlotUnavailableOverlay: React.FC<{\n  show: boolean,\n  availableLv: CoreLinkSlotAvailableLv | EquipmentSlotAvailableLv\n}> = React.memo(({ show, availableLv }) => {\n  const { t } = useTranslation();\n\n  return (\n    ifTruthy(\n      show,\n      (<span\n        css={{\n          display: 'inline-flex',\n          flexDirection: 'column',\n          alignItems: 'center',\n          justifyContent: 'center',\n          position: 'absolute',\n          inset: 0,\n          backgroundColor: 'rgba(0, 0, 0, 0.75)'\n        }}>\n        <SVGIcon css={{ height: 24, width: 24 }}>\n          <LockClosed/>\n        </SVGIcon>\n        <span css={{ color: '#ccc', fontWeight: 'bold' }}>\n          {t('lv')}&nbsp;{availableLv}\n        </span>\n      </span>)\n    )\n  );\n});\n\nexport default SlotUnavailableOverlay;\n","/** @jsxRuntime classic */\n/** @jsx jsx */\nimport { jsx } from '@emotion/react';\nimport React from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport { Image } from 'react-bootstrap';\n\nimport { EquipmentEnhancementLevel, EquipmentId, EquipmentRank, EquipmentType } from '../../../domain/EquipmentData';\n\nconst EquipmentItemView: React.FC<{\n  equipmentId: EquipmentId,\n  equipmentType: EquipmentType,\n  equipmentRank: EquipmentRank,\n  enhancementLv: EquipmentEnhancementLevel\n}> = ({ equipmentId, equipmentType, equipmentRank, enhancementLv }) => {\n  const { t } = useTranslation();\n\n  return (\n    <span css={{ position: 'relative', display: 'inline-block' }}>\n      <Image\n        fluid\n        rounded\n        draggable=\"false\"\n        sizes=\"(max-width: 480px) 47px, (min-width: 480px) 62px\"\n        alt={t(`equipment:${equipmentId}`)}\n        src={`${process.env.PUBLIC_URL}/equip_icon/${equipmentType}_${equipmentId}_${equipmentRank}.webp`}\n      />\n      <Image\n        draggable=\"false\"\n        css={{ position: 'absolute', top: -10, left: -5 }}\n        height={28}\n        width={28}\n        alt={`${t(`equipment:rank.${equipmentRank}`)} ${t(`equipment:type.${equipmentType}`)}`}\n        src={`${process.env.PUBLIC_URL}/icon/${equipmentType}_${equipmentRank}.webp`}\n      />\n      <span\n        css={{\n          position: 'absolute',\n          top: -5,\n          right: 0,\n          color: '#fff',\n          fontSize: '0.9em',\n          fontWeight: 'bold',\n          textShadow: [\n            '1px 1px 0px #000, -1px -1px 0px #000',\n            '-1px 1px 0px #000,  1px -1px 0px #000',\n            '1px 0px 0px #000, -1px  0px 0px #000',\n            '0px 1px 0px #000,  0px -1px 0px #000'\n          ].join()\n        }}\n      >\n        +{enhancementLv}\n      </span>\n    </span>\n  );\n};\n\nexport default EquipmentItemView;\n","/** @jsxRuntime classic */\n/** @jsx jsx */\nimport { jsx } from '@emotion/react';\nimport React from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport { Image } from 'react-bootstrap';\n\nimport { EquipmentType } from '../../../domain/EquipmentData';\n\nconst EquipmentPlaceholder: React.FC<{ type: EquipmentType }> = React.memo(({ type }) => {\n  const { t } = useTranslation();\n\n  return (\n    <span\n      css={{\n        display: 'inline-flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        height: '100%',\n        width: '100%',\n        opacity: 0.5\n      }}\n    >\n      <Image\n        rounded\n        draggable=\"false\"\n        height={32}\n        width={32}\n        alt={t(`equipment:type.${type}`)}\n        src={`${process.env.PUBLIC_URL}/icon/placeholder_${type}.webp`}\n      />\n    </span>\n  );\n});\n\nexport default EquipmentPlaceholder;\n","import { constSelector, selectorFamily, useRecoilValue } from 'recoil';\n\nimport {\n  Chip,\n  EquipmentData,\n  EquipmentType,\n  Gear,\n  matchExclusive,\n  Os\n} from '../../domain/EquipmentData';\nimport { UnitBasicInfo, UnitNumber } from '../../domain/UnitBasicInfo';\n\nimport { equipmentData } from '../../data/equipmentData';\n\nimport { EquipmentSlot } from './unitEquipmentState';\n\nfunction filterEquipment(unit: UnitNumber) {\n  return function<T extends EquipmentData>(equipment: T) {\n    return matchExclusive(unit, equipment);\n  };\n}\n\nconst chipEquipment = constSelector<ReadonlyArray<Chip>>(\n  Object.values(equipmentData).filter(e => e.type === EquipmentType.Chip) as ReadonlyArray<Chip>\n);\n\nconst osEquipment = constSelector<ReadonlyArray<Os>>(\n  Object.values(equipmentData).filter(e => e.type === EquipmentType.Os) as ReadonlyArray<Os>\n);\n\nconst gearEquipment = constSelector<ReadonlyArray<Gear>>(\n  Object.values(equipmentData).filter(e => e.type === EquipmentType.Gear) as ReadonlyArray<Gear>\n);\n\nconst availableChipEquipmentState = selectorFamily<ReadonlyArray<Chip>, UnitNumber>({\n  key: 'availableChipEquipmentState',\n  get: (unit) => ({ get }) => get(chipEquipment).filter(filterEquipment(unit))\n});\n\nconst availableOsEquipmentState = selectorFamily<ReadonlyArray<Os>, UnitNumber>({\n  key: 'availableOsEquipmentState',\n  get: (unit) => ({ get }) => get(osEquipment).filter(filterEquipment(unit))\n});\n\nconst availableGearEquipmentState = selectorFamily<ReadonlyArray<Gear>, UnitNumber>({\n  key: 'availableGearEquipmentState',\n  get: (unit) => ({ get }) => get(gearEquipment).filter(filterEquipment(unit))\n});\n\nexport function useAvailableEquipment(unit: UnitBasicInfo, slot: 'chip1' | 'chip2'): ReadonlyArray<Chip>\nexport function useAvailableEquipment(unit: UnitBasicInfo, slot: 'os'): ReadonlyArray<Os>\nexport function useAvailableEquipment(unit: UnitBasicInfo, slot: 'gear'): ReadonlyArray<Gear>\nexport function useAvailableEquipment(unit: UnitBasicInfo, slot: EquipmentSlot): ReadonlyArray<Chip | Os | Gear> {\n  switch (slot) {\n  case 'chip1':\n  case 'chip2':\n    return useRecoilValue(availableChipEquipmentState(unit.no));\n  case 'os':\n    return useRecoilValue(availableOsEquipmentState(unit.no));\n  case 'gear':\n    return useRecoilValue(availableGearEquipmentState(unit.no));\n  }\n}\n","/** @jsxRuntime classic */\n/** @jsx jsx */\nimport { jsx } from '@emotion/react';\nimport React, { MouseEventHandler, ReactNode } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport { Dropdown, Image } from 'react-bootstrap';\nimport EquipmentItemView from './EquipmentItemView';\nimport EquipmentPlaceholder from './EquipmentPlaceholder';\nimport SlotUnavailableOverlay from '../SlotUnavailableOverlay';\n\nimport { Chip, EquipmentId, EquipmentType, Gear, Os } from '../../../domain/EquipmentData';\nimport { ChipEquipment, GearEquipment, OsEquipment } from '../../../domain/status/UnitEquipment';\nimport { UnitBasicInfo } from '../../../domain/UnitBasicInfo';\n\nimport { EquipmentSlot, useEquipmentAvailable, useUnitEquipment } from '../../../state/equipment/unitEquipmentState';\nimport { useAvailableEquipment } from '../../../state/equipment/availableEquipment';\nimport { useSelectedUnit } from '../../../state/selector/unitSelectorState';\n\nimport { ifNonNullable } from '../../../util/react';\n\nimport './EquipmentSelector.css';\n\ntype SlotEquipment<S extends EquipmentSlot> =\n  S extends 'chip1' | 'chip2' ? Chip :\n  S extends 'os' ? Os :\n  S extends 'gear' ? Gear :\n    never\n\ntype SlotEquipmentType<S extends EquipmentSlot> =\n  S extends 'chip1' | 'chip2' ? typeof EquipmentType.Chip :\n  S extends 'os' ? typeof EquipmentType.Os :\n  S extends 'gear' ? typeof EquipmentType.Gear :\n    never\n\ntype Props<S extends EquipmentSlot> = {\n  unit: UnitBasicInfo,\n  id: string,\n  slot: S,\n  type: SlotEquipmentType<S>,\n  value?:\n    S extends 'chip1' | 'chip2' ? ChipEquipment :\n    S extends 'os' ? OsEquipment :\n    S extends 'gear' ? GearEquipment :\n      never,\n  items: ReadonlyArray<SlotEquipment<S>>,\n  onSelect: (equipment: SlotEquipment<S> | undefined) => void\n}\n\nconst EquipmentItem: React.FC<{\n  eventKey?: EquipmentId,\n  active: boolean,\n  label: string,\n  src: string\n}> = ({ eventKey, active, label, src, ...others }) => {\n  return (\n    <Dropdown.Item\n      {...others}\n      className=\"equipment\"\n      eventKey={eventKey}\n      active={active}\n    >\n      <Image\n        draggable=\"false\"\n        height={48}\n        width={48}\n        alt={label}\n        src={src}\n      />\n      <span className=\"label\">{label}</span>\n    </Dropdown.Item>\n  );\n};\n\nconst RemoveEquipmentItem: React.FC<{\n  active: boolean,\n  type: SlotEquipmentType<EquipmentSlot>\n}> = ({ active, type, ...others }) => {\n  const { t } = useTranslation();\n\n  return (\n    <EquipmentItem\n      {...others}\n      active={active}\n      label={t('status.remove_equipment')}\n      src={`${process.env.PUBLIC_URL}/icon/placeholder_${type}.webp`}\n    />\n  );\n};\n\nconst EquipmentSelectorMenu = <T extends EquipmentSlot>(\n  { type, value, items, ...others }: Pick<Props<T>, 'type' | 'value' | 'items'>\n): ReturnType<React.FC<Pick<Props<T>, 'type' | 'value' | 'items'>>> => {\n  const { t } = useTranslation();\n\n  return (\n    <Dropdown.Menu {...others} className=\"equipment\">\n      <div className=\"equipment-menu-grid\">\n        <RemoveEquipmentItem type={type} active={!value?.equipped.id} />\n        {items.map(item => (\n          <EquipmentItem\n            key={item.id}\n            eventKey={item.id}\n            active={item.id === value?.equipped.id}\n            label={t(`equipment:${item.id}`)}\n            src={`${process.env.PUBLIC_URL}/equip_icon/${item.type}_${item.id}_ss.webp`}\n          />\n        ))}\n      </div>\n    </Dropdown.Menu>\n  );\n};\n\nconst EquipmentSlotUnavailableOverlay: React.FC<{ unit: UnitBasicInfo, slot: EquipmentSlot }> = ({ unit, slot }) => {\n  const [available, availableLv] = useEquipmentAvailable(unit, slot);\n  return (<SlotUnavailableOverlay show={!available} availableLv={availableLv} />);\n};\n\nconst EquipmentToggle = React.forwardRef<\n  HTMLAnchorElement,\n  {\n    onClick: MouseEventHandler<HTMLAnchorElement>,\n    id: string,\n    children: ReactNode\n  }\n>(({ onClick, id, children }, ref) => (\n  <a\n    href=\"\"\n    ref={ref}\n    id={id}\n    onClick={(e) => {\n      e.preventDefault();\n      onClick(e);\n    }}\n  >\n    {children}\n  </a>\n));\n\nconst EquipmentDropdown = <T extends EquipmentSlot>(\n  { id, unit, slot, type, value, onSelect, items }: Props<T>\n): ReturnType<React.FC<Props<T>>> => {\n  return (\n    <Dropdown\n      className=\"slot equipment\"\n      onSelect={(eventKey) => {\n        if (eventKey) {\n          const item = items.find((item: SlotEquipment<T>) => item.id === eventKey);\n          item && onSelect(item);\n        } else {\n          onSelect(undefined);\n        }\n      }}\n    >\n      <Dropdown.Toggle as={EquipmentToggle} id={id}>\n        <span className=\"equipment-toggle-view\">\n          {value ?\n            (<EquipmentItemView\n              equipmentId={value.equipped.id}\n              equipmentType={type}\n              equipmentRank={value.rank}\n              enhancementLv={value.enhanceLv}\n            />) :\n            <EquipmentPlaceholder type={type} />}\n          <EquipmentSlotUnavailableOverlay unit={unit} slot={slot} />\n        </span>\n      </Dropdown.Toggle>\n      <EquipmentSelectorMenu type={type} value={value} items={items} />\n    </Dropdown>\n  );\n};\n\nconst Chip1EquipmentDropdown: React.FC<{ unit: UnitBasicInfo }> = ({ unit }) => {\n  const items = useAvailableEquipment(unit, 'chip1');\n  const [type, equipment, equip] = useUnitEquipment(unit, 'chip1');\n  return (\n    <EquipmentDropdown\n      id=\"chip1-equipment-dropdown\"\n      unit={unit}\n      slot=\"chip1\"\n      type={type}\n      value={equipment}\n      onSelect={equip}\n      items={items}\n    />\n  );\n};\n\nconst Chip2EquipmentDropdown: React.FC<{ unit: UnitBasicInfo }> = ({ unit }) => {\n  const items = useAvailableEquipment(unit, 'chip2');\n  const [type, equipment, equip] = useUnitEquipment(unit, 'chip2');\n  return (\n    <EquipmentDropdown\n      id=\"chip2-equipment-dropdown\"\n      unit={unit}\n      slot=\"chip2\"\n      type={type}\n      value={equipment}\n      onSelect={equip}\n      items={items}\n    />\n  );\n};\n\nconst OsEquipmentDropdown: React.FC<{ unit: UnitBasicInfo }> = ({ unit }) => {\n  const items = useAvailableEquipment(unit, 'os');\n  const [type, equipment, equip] = useUnitEquipment(unit, 'os');\n  return (\n    <EquipmentDropdown\n      id=\"os-equipment-dropdown\"\n      unit={unit}\n      slot=\"os\"\n      type={type}\n      value={equipment}\n      onSelect={equip}\n      items={items}\n    />\n  );\n};\n\nconst GearEquipmentDropdown: React.FC<{ unit: UnitBasicInfo }> = ({ unit }) => {\n  const items = useAvailableEquipment(unit, 'gear');\n  const [type, equipment, equip] = useUnitEquipment(unit, 'gear');\n  return (\n    <EquipmentDropdown\n      id=\"gear-equipment-dropdown\"\n      unit={unit}\n      slot=\"gear\"\n      type={type}\n      value={equipment}\n      onSelect={equip}\n      items={items}\n    />\n  );\n};\n\nconst EquipmentSelector: React.FC<{ slot: EquipmentSlot }> = ({ slot }) => {\n  const selected = useSelectedUnit();\n\n  return ifNonNullable(\n    selected,\n    unit => {\n      switch (slot) {\n      case 'chip1': return (<Chip1EquipmentDropdown unit={unit} />);\n      case 'chip2': return (<Chip2EquipmentDropdown unit={unit} />);\n      case 'os':    return (<OsEquipmentDropdown unit={unit} />);\n      case 'gear':  return (<GearEquipmentDropdown unit={unit} />);\n      }\n    }\n  );\n};\n\nexport default EquipmentSelector;\n"],"sourceRoot":""}