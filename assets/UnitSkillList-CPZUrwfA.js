var ae=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)};var _=(e,t,n)=>(ae(e,t,"read from private field"),n?n.call(e):t.get(e)),ne=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},ie=(e,t,n,i)=>(ae(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n);import{R as f,_ as ke,u as Se,a as he,c as $e,y as d,H as Ee,I as v,B as a,J as b,O as L,T as J,K as y,L as De,M as Ue,N as Re,Q as Pe,U as h,V as se,W as K,X as be,Y as C,Z as X,$ as ce,a0 as oe,a1 as Ve,a2 as Ie,a3 as N,a4 as le,a5 as R,a6 as Oe,a7 as u,a8 as Be,a9 as Le,aa as je,ab as ye,ac as Me,ad as ze,ae as Ge,af as He,ag as r,ah as D,ai as We,aj as Je,ak as Ke,al as Xe,am as Ze,an as Z,ao as Qe,ap as Ye,aq as H,ar as et,as as tt,at,au as nt,av as it,aw as st,ax as ct,ay as ot,S as lt,az as rt,aA as ft,aB as W,aC as ut,aD as dt,aE as pt,aF as gt,aG as mt,aH as Ae,aI as P,aJ as xe,aK as Q,aL as Y}from"./index-BgzsPpF_.js";import{C as T}from"./Col-ChaW8iIV.js";var _t=["bsPrefix","fluid","as","className"],vt={fluid:!1},ee=f.forwardRef(function(e,t){var n=e.bsPrefix,i=e.fluid,s=e.as,c=s===void 0?"div":s,o=e.className,l=ke(e,_t),p=Se(n,"container"),k=typeof i=="string"?"-"+i:"-fluid";return f.createElement(c,he({ref:t},l,{className:$e(o,i?""+p+k:p)}))});ee.displayName="Container";ee.defaultProps=vt;const Te=ee;var kt=["bsPrefix","className","noGutters","as"],St=["xl","lg","md","sm","xs"],ht={noGutters:!1},te=f.forwardRef(function(e,t){var n=e.bsPrefix,i=e.className,s=e.noGutters,c=e.as,o=c===void 0?"div":c,l=ke(e,kt),p=Se(n,"row"),k=p+"-cols",g=[];return St.forEach(function(x){var I=l[x];delete l[x];var O;I!=null&&typeof I=="object"?O=I.cols:O=I;var Ne=x!=="xs"?"-"+x:"";O!=null&&g.push(""+k+Ne+"-"+O)}),f.createElement(o,he({ref:t},l,{className:$e.apply(void 0,[i,p,s&&"no-gutters"].concat(g))}))});te.displayName="Row";te.defaultProps=ht;const B=te,we={[b.Effective]:"#d0191d",[b.High]:"#ff8f03",[b.Middle]:"#ba5a03",[b.Low]:"#763316",[b.Weak]:"#6b3f31",[b.None]:"#4b4b4d"},re=e=>e!==b.None?{borderRadius:2,position:"absolute",top:-3,bottom:4,left:-3,right:4,opacity:.8,backgroundColor:we[e]}:{},w=({selected:e,type:t,...n})=>{const{t:i}=d();return a("td",{css:{border:"5px solid transparent",width:"33%",position:"relative","&::after":{content:'" "',display:"block",marginTop:"100%"}}},a("div",{css:{borderRadius:2,position:"absolute",inset:0,backgroundColor:e?"#16d4d4":we[b.None]}}),t===b.High||t===b.Middle||t===b.Low||t===b.Weak?a(L,{...n,placement:"auto",overlay:a(J,{id:"tooltip-aoe-cell"},i(`skill.effective_rate.${t}`))},a("div",{css:re(t)})):a("div",{css:re(t)}))},$t=({skillType:e,unit:t,...n})=>{const{t:i}=d(),s=Ee(e,t);return v(s,c=>a("div",{...n},a("table",{css:{borderCollapse:"collapse",width:"100%",transform:"skewX(-9deg)"}},a("tbody",null,a("tr",null,a(w,{selected:c.select===7,type:c.area[0]}),a(w,{selected:c.select===8,type:c.area[1]}),a(w,{selected:c.select===9,type:c.area[2]})),a("tr",null,a(w,{selected:c.select===4,type:c.area[3]}),a(w,{selected:c.select===5,type:c.area[4]}),a(w,{selected:c.select===6,type:c.area[5]})),a("tr",null,a(w,{selected:c.select===1,type:c.area[6]}),a(w,{selected:c.select===2,type:c.area[7]}),a(w,{selected:c.select===3,type:c.area[8]})))),a("span",{css:{color:"#16d4d4"}},c.select?" ":i("skill.fixed_area"))))},bt={[y.Fire]:"#c33",[y.Ice]:"#0cf",[y.Electric]:"#fc0"},At=({skillType:e,unit:t})=>{const{t:n}=d(),i=De(e,t);if(!i[0])return null;const[s,c]=i;return a("div",{css:{color:"#ccc",marginTop:10}},a("span",null,c===Re.Single?n("effect:damage_deal.target.single"):n("effect:damage_deal.target.area")),v(s.effective,o=>a("span",null,n(`effect:effective.${o}`),n("effect:separator"))),a("span",null,n("status.atk")),a("span",{css:{margin:"0 5px",color:"#fc0",fontWeight:"bold"}},Ue(s),"%"),a("span",null,n("effect:as_preposition")),v(s.attribute,o=>a("span",{css:{margin:"0 5px",color:bt[o],fontWeight:600}},n(`effect:attribute.${o}`))),a("span",null,n("effect:damage")))},xt=({skillType:e,unit:t})=>{const{t:n}=d(),i=Pe(e,t);return h(i,a("div",{css:{color:"#ccc",fontSize:"0.9em",marginTop:10}},a("span",null,n("effect:effects_as_equipment.description.prefix")),a(L,{placement:"auto",overlay:a(J,{id:"tooltip-effects-as-equipment"},n("effect:effects_as_equipment.annotation"))},a("span",{css:{cursor:"help",textDecoration:"underline"}},n("effect:effects_as_equipment.description.as_equipment"))),a("span",null,n("effect:effects_as_equipment.description.suffix"))))},A=({unitAlias:e,exceptUnit:t})=>{const{t:n}=d(),i=a(se,{id:"popover-unit-alias",css:{opacity:"0.9"}},a(se.Content,null,[...K[e]].filter(s=>s!==t).map(s=>a("div",{key:s,css:{textAlign:"left"}},n("unit:display",{number:s})))));return a(L,{placement:"auto",overlay:i},a("span",{css:{display:"inline-block",cursor:"help",textDecoration:"underline"}},n(`effect:unit.${e}`)))},Ce=({target:e,selfUnitNumber:t})=>{const{t:n}=d();function i(l){return n("effect:with_quotes",{value:n("unit:display",{number:l})})}const s="conditions"in e&&e.conditions,c="except"in e?e.except:void 0,o=e.kind===be.AllyExceptSelf?t:C(c)?void 0:c;return a(f.Fragment,null,n(`effect:effect.target.kind.${e.kind}`),s||c?n("effect:of_preposition"):null,v(c,l=>a(f.Fragment,null,C(l)?`${i(l[0])}${n("effect:unit_separator")}${i(l[1])}`:i(l),n("effect:except_preposition"),s?null:n("effect:unit.unit"))),s?e.conditions.map((l,p,k)=>{const g=++p<k.length?n("effect:unit_separator"):"";if(typeof l=="number")return i(l)+g;if(typeof l=="string")return X(l)?a(f.Fragment,{key:l},a(A,{unitAlias:l,exceptUnit:o}),g):n(`effect:unit.${l}`)+g;if("alias"in l){const x="type"in l?n(`effect:unit.${l.type}`):"role"in l?n(`effect:unit.${l.role}`):null;return a(f.Fragment,{key:JSON.stringify(l)},a(A,{unitAlias:l.alias,exceptUnit:o}),x?n("effect:of_preposition"):null,x,g)}else{if("not_alias"in l)return a(f.Fragment,{key:JSON.stringify(l)},a(A,{unitAlias:l.not_alias,exceptUnit:o}),n("effect:negative_form"),"type"in l?n(`effect:unit.${l.type}`):"role"in l?n(`effect:unit.${l.role}`):n("effect:unit.unit"),g);if("kind"in l){const x="type"in l?l.type:l.role;return n(`effect:unit.${x}`)+n(`effect:unit.${l.kind}`)+g}else return n(`effect:unit.${l.type}`)+n(`effect:unit.${l.role}`)+g}}):null)};var m;class Tt{constructor(t){ne(this,m,void 0);ie(this,m,t)}get enemyTargetConditions(){const t=!_(this,m).conditions||_(this,m).conditions.every(s=>!("state"in s)||!("target"in s.state)),n=!ce(_(this,m).details);if(t&&n&&oe(_(this,m))&&_(this,m).target.kind===be.Enemy){const{kind:s,conditions:c}=_(this,m).target;return c&&{kind:s,conditions:c}}}get hasAnyConditions(){return!!_(this,m).conditions||!!this.enemyTargetConditions}get hasMultipleConditions(){var t;return(((t=_(this,m).conditions)==null?void 0:t.length)??0)>1}get effective(){return"effective"in _(this,m)?_(this,m).effective:void 0}get scaleFactor(){return"scale_factor"in _(this,m)?_(this,m).scale_factor:void 0}get effectTargets(){var i;const t=Ve(_(this,m).details);if(ce(_(this,m).details)&&oe(_(this,m))){const s=(i=_(this,m).conditions)==null?void 0:i.some(c=>"state"in c&&"target"in c.state);return Object.assign(t?{self:!0}:{},{target:!0,...s?{}:_(this,m).target})}else return t?{self:!0}:{around:!0}}}m=new WeakMap;function q(e,t){return++t<e.length}function wt(e,t,n){switch(e[0]){case u.HpGreaterOrEqual:case u.HpLessOrEqual:case u.HpGreaterThan:case u.HpLessThan:return a("span",null,n(`effect:condition.state.${e[0]}`,{value:e[1]}));case u.HpRateGreaterOrEqualThanSelf:return a("span",null,n(`effect:condition.state.${e[0]}`));case u.StatusGreaterThanSelf:case u.StatusLessThanSelf:return a("span",null,n(`effect:condition.state.${e[0]}`,e[1]));case u.StatusGreaterOrEqualThan:return a("span",null,n(`effect:condition.state.${e[0]}`,e[1]));case u.RankGreaterOrEqual:return a("span",null,n(`effect:condition.state.${e[0]}`,{rank:e[1]}));case u.Affected:{const i=e[1];return C(i)?a("span",null,n("effect:condition.state.affected_both",{effect:{0:i[0],1:i[1]}})):a("span",null,n(`effect:condition.state.${e[0]}`,{effect:i}))}case u.NotAffected:{const i=e[1].map(s=>n(`effect:effect.name.${s}`)).join(n("effect:and_symbolic_separator"));return a("span",null,n(`effect:condition.state.${e[0]}`,{effects:i}))}case u.AffectedBy:return Ct(e[1],n);case u.AffectedActiveBy:return a("span",null,a(A,{unitAlias:e[1].alias}),n("effect:condition.state.affected_active_by_alias"));case u.Tagged:{const i=e[1];return C(i)?a("span",null,n("effect:condition.state.multiple_tagged",{tag1:i[0],tag2:i[1]})):a("span",null,n(`effect:condition.state.${e[0]}`,{tag:i}))}case u.NotTagged:return a("span",null,n(`effect:condition.state.${e[0]}`,{tag:e[1]}));case u.TaggedAffected:case u.NotTaggedAffected:return a("span",null,n(`effect:condition.state.${e[0]}`,e[1]));case u.Stack:if("effect"in e[1])return n("effect:condition.state.tag_effect_stack_ge",e[1]);if("equal"in e[1])return n("effect:condition.state.tag_stack_eq",e[1]);{const{tag:i}=e[1],s=C(i),c=s?"tags_":"tag_",o="greater_or_equal"in e[1]?"stack_ge":"stack_le",l={...e[1],...s?{tags:i.map(p=>n("effect:tag.format",{tag:p})).join(n("effect:or_symbolic_separator"))}:{}};return n(`effect:condition.state.${c}${o}`,l)}case u.Form:return a("span",null,n(`effect:condition.state.${e[0]}`,{form:e[1]}));case u.Equipped:{const i=n(`equipment:${e[1]}`);return a("span",null,n(`effect:condition.state.${e[0]}`,{equipment:i}))}case u.NotEquipped:{const i=e[1].map(s=>`${n("effect:with_quotes",{value:n(`equipment:${s}`)})}`).join(n("effect:unit_separator"));return a("span",null,n(`effect:condition.state.${e[0]}`,{equipments:i}))}case u.Grid:return a("span",null,n(`effect:condition.state.${e[0]}`,{grid:e[1]}));case u.Unit:return F(e[0],e[1],t,n);default:return e}}function Ct(e,t){if("alias"in e)return a(f.Fragment,null,t("effect:with_quotes",{value:t("unit:display",{number:e.except})}),t("effect:except_preposition"),a(A,{unitAlias:e.alias,exceptUnit:e.except}),t("effect:condition.state.affected_by_alias"));if("effect"in e){const n="unit"in e?"affected_effect_by":"affected_equipment_effect_by";return a("span",null,t(`effect:condition.state.${n}`,e))}else return a("span",null,t("effect:condition.state.affected_by",e))}function F(e,t,n,i){function s(c){return i("effect:with_quotes",{value:i("unit:display",{number:c})})}if(typeof t=="number")return a("span",null,i(`effect:condition.state.${e}`,{unit:s(t)}));if(C(t)){let c;if(Me(t)||t[0]===ze.Light)c=`${i(`effect:unit.${t[0]}`)}${i("effect:unit_separator")}${i(`effect:unit.${t[1]}`)}`;else if(Ge(t))c=`${i(`effect:unit.${t[0]}`)}${i("effect:unit_separator")}${s(t[1])}`;else if(He(t)){const o=i("effect:condition.state.form_unit",t[0]),l=i("effect:condition.state.equipped_unit",t[1]);c=`${o}${i("effect:unit_separator")}${l}`}else{const o=e===u.NotInSquad?i("effect:and_separator"):i("effect:unit_separator");c=t.map(l=>s(l)).join(o)}return a("span",null,i(`effect:condition.state.${e}`,{unit:c}))}else if(typeof t=="string"){const c=e===u.InSquad||e===u.NotInSquad;if(X(t))return a(f.Fragment,null,h(c&&K[t].has(n),a("span",null,i("effect:unit.self"),i("effect:except_preposition"))),a(A,{unitAlias:t,exceptUnit:c?n:void 0}),a("span",null,i(`effect:condition.state.${e}`,{unit:""})));{const o=t!=="cross_adjacent"&&t!=="armored_bulgasari"&&t!=="golden_factory";return a(f.Fragment,null,h(c&&o,a("span",null,i("effect:unit.self"),i("effect:except_preposition"))),a("span",null,i(`effect:condition.state.${e}`,{unit:i(`effect:unit.${t}`)})))}}else{if("alias"in t)return a(f.Fragment,null,a(A,{unitAlias:t.alias}),i("effect:of_preposition"),i(`effect:unit.${t.role}`),i(`effect:condition.state.${e}`,{unit:""}));if("equipment"in t)return a("span",null,i("effect:condition.state.affected_equipment_effect_by",t));if("equipped"in t)return a("span",null,i("effect:condition.state.equipped_unit",t));if("form"in t)return a("span",null,i("effect:condition.state.form_unit",t));if(u.Tagged in t){const c="unit"in t?s(t.unit):i("effect:unit.ally");return a("span",null,i("effect:condition.state.tagged",{tag:t.tagged}),i("effect:condition.state.in_squad",{unit:c}))}else return a("span",null,i("effect:condition.state.affected_effect_by",t.affected_by),i("effect:condition.state.in_squad",{unit:i("effect:unit.ally")}))}}const fe=e=>{const{t}=d(),{state:n,unitNumber:i}=e;return a(f.Fragment,null,"target"in e?a(f.Fragment,null,a(Ce,{target:e.target,selfUnitNumber:i}),t("effect:case_particle")):t("effect:condition.target.self"),n.map((s,c)=>a(f.Fragment,{key:JSON.stringify(s)},R(s).map((o,l,p)=>a(f.Fragment,{key:o[0]},wt(o,i,t),h(q(p,l),a("span",null,t("effect:and_symbolic_separator"))))),h(q(n,c),a("span",null,t("effect:or_symbolic_separator"))))))},ue=({state:e,unitNumber:t})=>{const{t:n}=d(),i=o=>"equal"in o?n("effect:condition.state.cross_adjacent_eq",o):"less_or_equal"in o?n("effect:condition.state.cross_adjacent",o):n("effect:condition.state.cross_adjacent_ge",o),s=o=>n("effect:condition.state.num_of_defender_armored_bulgasari",o),c=o=>"less_than"in o?n("effect:condition.state.num_of_allies_lt_enemies",o):"greater_than"in o?n("effect:condition.state.num_of_units_gt_enemies",o):n("effect:condition.state.num_of_units_le_enemies",o);return C(e)?a(f.Fragment,null,n("effect:condition.target.squad"),Oe(e)?F(u.InSquad,e.map(o=>o.in_squad),t,n):Be(e)?a(f.Fragment,null,F(u.NotInSquad,e[0].not_in_squad,t,n),a("span",null,n("effect:or_symbolic_separator")),F(u.InSquad,e[1].in_squad,t,n)):F(u.InSquad,[e[0].in_squad,e[1].in_squad],t,n)):u.NumOfUnits in e&&Le(e.num_of_units)?a("span",null,c(e.num_of_units)):a(f.Fragment,null,n("effect:condition.target.squad"),R(e).map((o,l,p)=>{const k=()=>a(f.Fragment,null,h(q(p,l),n("effect:and_symbolic_separator")));switch(o[0]){case u.InSquad:return a(f.Fragment,{key:o[0]},F(u.InSquad,o[1],t,n),a(k,null));case u.NotInSquad:return a(f.Fragment,{key:o[0]},F(u.NotInSquad,o[1],t,n),a(k,null));case u.NumOfUnits:{const g=o[1];return je(g)?a(f.Fragment,{key:o[0]},i(g),a(k,null)):ye(g)?a(f.Fragment,{key:o[0]},s(g),a(k,null)):a(f.Fragment,{key:o[0]},"equal"in g?n("effect:condition.state.num_of_units_eq",g):"greater_or_equal"in g?n("effect:condition.state.num_of_units_ge",g):n("effect:condition.state.num_of_units_le",g),a(k,null))}default:return o}}))},Ft=({state:e})=>{const{t}=d(),{num_of_units:n}=e;if("unit"in e){const i=t(`effect:unit.${e.unit}`);return a(f.Fragment,null,t("effect:condition.target.enemy"),t("effect:condition.state.num_of_enemies_eq",n),t("effect:and_symbolic_separator"),t("effect:condition.state.unit",{unit:i}))}else return a(f.Fragment,null,"unit"in n?t("effect:condition.target.enemy_unit",n):t("effect:condition.target.enemy"),"equal"in n?t("effect:condition.state.num_of_enemies_eq",n):"less_or_equal"in n?"greater_or_equal"in n?t("effect:condition.state.num_of_enemies",n):t("effect:condition.state.num_of_enemies_le",n):t("effect:condition.state.num_of_enemies_ge",n))},qt=({condition:e,unitNumber:t})=>{const{t:n}=d();if(!("trigger"in e))return null;switch(e.trigger){case N.StartRound:return a(f.Fragment,null,e.round?typeof e.round=="string"?n(`effect:condition.trigger.start_${e.round}_round`):"at"in e.round?n("effect:condition.trigger.round.at",{round:e.round.at}):"from"in e.round?n("effect:condition.trigger.round.from",{round:e.round.from}):n("effect:condition.trigger.round.until",{round:e.round.until}):n("effect:condition.trigger.start_round"));case N.UseActive1:case N.UseActive2:case N.HitActive1:case N.HitActive2:return a(f.Fragment,null,[..."round"in e?[n(`effect:condition.trigger.round.${e.round}`)]:[],n(`effect:condition.trigger.${e.trigger}`,{unit:t})].join(""));case N.SeizeOpportunity:return a(f.Fragment,null,[...K[le.NotApplicableForSeizeOpportunity]].map(i=>n("effect:with_quotes",{value:n("unit:display",{number:i})})).join(n("effect:unit_separator")),n("effect:except_preposition"),a(A,{unitAlias:le.ApplicableForSeizeOpportunity}),n("effect:case_particle"),n(`effect:condition.trigger.${e.trigger}`));default:return a(f.Fragment,null,n(`effect:condition.trigger.${e.trigger}`))}},de=e=>{const{t}=d(),{unitNumber:n}=e;if(!("state"in e.condition))return null;const i=({show:c})=>a(f.Fragment,null,h(c,t("effect:and_symbolic_separator"))),s=({entry:c,unitNumber:o,needSeparator:l})=>{const[p,k]=c;return p==="self"?a(f.Fragment,{key:p},a(fe,{state:k,unitNumber:o}),a(i,{show:l})):p==="squad"?a(f.Fragment,{key:p},a(ue,{key:p,state:k,unitNumber:o}),a(i,{show:l})):a(f.Fragment,{key:p},a(Ft,{state:k}),a(i,{show:l}))};return a(f.Fragment,null,"target"in e?R(e.condition.state).map((c,o,l)=>c[0]==="target"?a(f.Fragment,{key:c[0]},a(fe,{state:c[1],target:e.target,unitNumber:n}),a(i,{show:q(l,o)})):c[0]==="squad"?a(f.Fragment,{key:c[0]},a(ue,{state:c[1],unitNumber:n}),a(i,{show:q(l,o)})):a(s,{key:c[0],entry:c,unitNumber:n,needSeparator:q(l,o)})):R(e.condition.state).map((c,o,l)=>a(s,{key:c[0],entry:c,unitNumber:n,needSeparator:q(l,o)})),t("effect:case"))},E=e=>{const{t}=d(),{condition:n,unitNumber:i}=e,s="trigger"in n&&"state"in n;return a("span",null,a(qt,{condition:n,unitNumber:i}),h(s,t("effect:separator")),"target"in e?a(de,{condition:e.condition,target:e.target,unitNumber:i}):a(de,{condition:e.condition,unitNumber:i}))},Nt=({target:e})=>{const{t}=d(),n=e.conditions.map(i=>t(`effect:unit.${i}`)).join(t("effect:unit_separator"));return a(f.Fragment,null,t("effect:effect.target.kind.enemy"),t("effect:case_particle"),t("effect:condition.state.unit",{unit:n}),t("effect:case"))},Et=({effective:e})=>{const{t}=d();return v(e,n=>a("span",null,t(`effect:effective.${n}`)))},Dt=({scaleFactor:e,unitNumber:t})=>{const{t:n}=d();return v(e,i=>{if("per_stack"in i){const s="effect"in i.per_stack?"effect:scale_factor.per_stack_effect":"effect:scale_factor.per_stack";return a("span",null,n(s,i.per_stack))}else switch(i.per_units.type){case"all":return a("span",null,n("effect:scale_factor.per_units"));case"squad":{const{unit:s="ally",except:c}=i.per_units,o=!!c;return a(f.Fragment,null,h(o,a("span",null,n("effect:unit.self"),n("effect:except_preposition"))),C(s)?a(f.Fragment,null,a(A,{unitAlias:s[0],exceptUnit:o?t:void 0}),a("span",null," ",n("effect:unit_separator")," "),a(A,{unitAlias:s[1],exceptUnit:o?t:void 0})):X(s)?a(A,{unitAlias:s,exceptUnit:o?t:void 0}):a("span",null,n(`effect:unit.${s}`)),a("span",null,n("effect:scale_factor.num_of_allies")))}case"enemy":return a("span",null,n("effect:unit.enemy"),v(i.per_units.unit,s=>n(`effect:unit.${s}`)),n(`effect:scale_factor.${i.per_units.variation}`))}})},Ut=({targets:e,unitNumber:t})=>{const{t:n}=d();return a("span",null,h("self"in e,n("effect:effect.target.self")),h("self"in e&&"target"in e,n("effect:and_separator")),"target"in e?"kind"in e?a(Ce,{target:e,selfUnitNumber:t}):n("effect:effect.target.target"):null,h("around"in e,n("effect:effect.target.around")),n("effect:to_preposition"))},Rt=({effect:e,unitNumber:t})=>{const{t:n}=d(),i=new Tt(e),s=()=>a("div",{css:{fontSize:"0.7em"}},n("effect:or_conjunction"));return a("div",null,a(()=>{if(Ie(e)){const l=e.conditions?e.conditions.length===1?a(E,{condition:e.conditions[0],target:e.target,unitNumber:t}):a(f.Fragment,null,a(E,{condition:e.conditions[0],target:e.target,unitNumber:t}),a(s,null),a(E,{condition:e.conditions[1],target:e.target,unitNumber:t})):null;return a(f.Fragment,null,l,v(i.enemyTargetConditions,p=>a(f.Fragment,null,h(!!l,n("effect:separator")),a(Nt,{target:p}))))}else return v(e.conditions,l=>l.length===1?a(E,{condition:l[0],unitNumber:t}):a(f.Fragment,null,a(E,{condition:l[0],unitNumber:t}),a(s,null),a(E,{condition:l[1],unitNumber:t})))},null),a(({children:l})=>i.hasAnyConditions?i.hasMultipleConditions?a("div",{css:{marginTop:5}},l):a("span",null,n("effect:separator"),l):a("span",null,l),null,a(Et,{effective:i.effective}),a(Dt,{scaleFactor:i.scaleFactor,unitNumber:t}),a(Ut,{targets:i.effectTargets,unitNumber:t}),n("effect:below_effects")))};function S(e,t,n){const i="rate"in t&&t.rate?typeof t.rate=="string"?`${n(`effect:rate.${t.rate}`)}${n("effect:separator")}`:`${n("effect:rate.percentage",{value:D(t.rate)})}${n("effect:separator")}`:"",s=["times"in t&&t.times?n("effect:times",{count:t.times}):void 0,"max_stack"in t&&typeof t.max_stack=="number"?t.max_stack===1?n("effect:does_not_stack"):n("effect:max_stack",{count:t.max_stack}):void 0,"cannot_be_dispelled"in t&&t.cannot_be_dispelled?n("effect:cannot_be_dispelled"):void 0].filter(Ze).join(n("effect:separator"));return`${i}${e}${s?` (${s})`:""}`}function j(e,t){return"term"in e?typeof e.term=="string"?t(`effect:term.${e.term}`):e.term&&t("effect:term.for_rounds",{value:e.term.for_rounds}):void 0}function $(e,t){return"tag"in e?e.tag&&t("effect:tag.format",{tag:e.tag}):void 0}function M(e,t,n){return{tag:$(t,n),detail:S(n(`effect:effect.description.${e}`,{value:t.value}),t,n),term:j(t,n)}}function z(e,t,n){return{tag:$(t,n),detail:S(n(`effect:effect.description.${e}`,{value:D(t)}),t,n),term:j(t,n)}}function pe(e,t,n){return{detail:S(n(`effect:effect.description.${e}`,{tag:t.tag}),t,n),term:j(t,n)}}function ge(e,t){return"effect"in e?t(`effect:effect.name.${e.effect}`):e.effects.map(n=>t(`effect:effect.name.${n}`)).join(t("effect:separator"))}function Pt(e,t){const n=j(e[1],t);switch(e[0]){case r.ActionCountUp:case r.ActionCountDown:case r.MinimizeDamage:case r.NullifyDamage:case r.AllBuffBlocking:case r.AllBuffRemoval:case r.AllDebuffRemoval:case r.ColumnProtect:case r.RowProtect:case r.TargetProtect:case r.ReAttack:case r.FollowUpAttack:case r.IgnoreBarrierDr:case r.IgnoreProtect:case r.IgnoreProtectDeactivate:case r.Reconnaissance:case r.Marked:case r.Provoked:case r.Immovable:case r.Silenced:case r.Stunned:case r.RefundAp:case r.AttackHit:case r.AttackCritical:case r.IgnoreDef:return{tag:$(e[1],t),detail:S(t(`effect:effect.description.${e[0]}`),e[1],t),term:n};case r.AMG11Construction:case r.DeployRabbitDField:case r.SummonHologramTiger:case r.GoldenFactoryConstruction:return{tag:$(e[1],t),detail:t(`effect:effect.description.${e[0]}`,{times:e[1].times}),term:n};case r.CooperativeAttack:{const{unit:i,active:s}=e[1];return{tag:$(e[1],t),detail:Ke(i)?t("effect:effect.description.cooperative_attack_form_active",{unit:i,no:s,form:Xe[i].default}):t("effect:effect.description.cooperative_attack",{unit:i,no:s}),term:n}}case r.Push:case r.Pull:case r.RangeUp:case r.RangeUpActive2:case r.FixedDamageOverTime:case r.FixedFireDamageOverTime:case r.FixedIceDamageOverTime:case r.FixedElectricDamageOverTime:case r.MinimizeDamageLessThanValue:case r.Barrier:return M(e[0],e[1],t);case r.RangeDown:return"length"in e[1]?e[1].map(i=>M(e[0],i,t)):M(e[0],e[1],t);case r.BattleContinuation:{const i="value"in e[1]?t("effect:effect.description.battle_continuation",{value:e[1].value}):t("effect:effect.description.battle_continuation_with_hp_rate",{value:D(e[1])});return{tag:$(e[1],t),detail:S(i,e[1],t),term:n}}case r.AtkValueUp:case r.DefValueUp:return{tag:$(e[1],t),detail:S(t(`effect:effect.description.${e[0]}`,{value:Je(e[1])}),e[1],t),term:n};case r.ApUp:case r.ApDown:case r.SetAp:return{tag:$(e[1],t),detail:S(t(`effect:effect.description.${e[0]}`,{value:We(e[1])}),e[1],t),term:n};case r.BuffRemoval:case r.DebuffRemoval:case r.EffectRemoval:{const i=ge(e[1],t);return{detail:S(e[1].tag?t(`effect:effect.description.tagged_${e[0]}`,{tag:e[1].tag,effects:i}):t(`effect:effect.description.${e[0]}`,{effects:i}),e[1],t),term:n}}case r.PreventsEffect:return{tag:$(e[1],t),detail:S(t(`effect:effect.description.${e[0]}`,{effects:ge(e[1],t)}),e[1],t),term:n};case r.ActivationRatePercentageUp:{const i=D(e[1]),s=e[1].effect;return{detail:S(e[1].tag?t("effect:effect.description.tagged_activation_rate_percentage_up",{tag:e[1].tag,effect:s,value:i}):t("effect:effect.description.activation_rate_percentage_up",{effect:s,value:i}),e[1],t),term:n}}case r.AbsolutelyActivated:return{detail:S(t(`effect:effect.description.${e[0]}`,e[1]),e[1],t),term:n};case r.FormChange:case r.FormRelease:return{tag:$(e[1],t),detail:S(t(`effect:effect.description.${e[0]}`,{form:e[1].form}),e[1],t),term:n};case r.TagStack:case r.TagRelease:return"length"in e[1]?e[1].map(i=>pe(e[0],i,t)):pe(e[0],e[1],t);case r.TagUnstack:return{detail:S(t(`effect:effect.description.${e[0]}`,{tag:e[1].tag,value:e[1].value}),e[1],t),term:n};case r.DamageMultiplierUpByStatus:case r.DamageMultiplierReductionByStatus:case r.CriReductionByStatus:return{tag:$(e[1],t),detail:S(t(`effect:effect.description.${e[0]}`,{status:e[1].status,value:D(e[1])}),e[1],t),term:n};case r.AtkValueUpByUnitValue:return{tag:$(e[1],t),detail:S(t(`effect:effect.description.${e[0]}`,{unit:e[1].unit,value:D(e[1])}),e[1],t),term:n};case r.DamageMultiplierDown:case r.DefDown:case r.AccDown:case r.CriDown:case r.EvaUp:case r.StatusResistUp:case r.DamageReductionUp:return"length"in e[1]?e[1].map(i=>z(e[0],i,t)):z(e[0],e[1],t);default:return z(e[0],e[1],t)}}const me=({tag:e,detail:t,term:n})=>{const{t:i}=d();return a("div",{css:{display:"flex",fontWeight:"bold",borderRadius:3,backgroundColor:"#1c3042",padding:"3px 8px",marginTop:5}},a("div",null,v(e,s=>a("span",null,s,i("effect:tag_separator"))),a("span",null,t)),a("div",{css:{marginLeft:"auto",textAlign:"right",flexShrink:0}},v(n,s=>a("span",{css:{marginLeft:10,color:"#aaa",fontSize:"0.9em"}},s))))},Vt=({entry:e})=>{const{t}=d(),n=Pt(e,t);return"length"in n?a(f.Fragment,null,n.map(i=>a(me,{key:JSON.stringify(i),...i}))):a(me,{...n})},G=({className:e,target:t,details:n,area:i})=>{const{t:s}=d();return a("div",{className:e},a("div",null,a(Z,{variant:"light"},s(`effect:effect.target.${t==="target"?i==="single"?"single":"area":t}`))),R(n).map(o=>a(Vt,{key:o[0],entry:o})))},It=({effect:e,unitNumber:t,area:n})=>{const i="self"in e.details?e.details.self:void 0,s="target"in e.details?e.details.target:void 0,c="around"in e.details?e.details.around:void 0;return a("div",{css:{border:"1px solid rgba(255, 255, 255, 0.3)",borderRadius:5,marginTop:10,padding:5,"& > .skill-effect-details":{marginTop:10}}},a(Rt,{effect:e,unitNumber:t}),v(i,o=>a(G,{className:"skill-effect-details",target:"self",details:o,area:n})),v(s,o=>a(G,{className:"skill-effect-details",target:"target",details:o,area:n})),v(c,o=>a(G,{className:"skill-effect-details",target:"around",details:o,area:n})))},Ot=({skillType:e,unit:t})=>{const n=Qe(e,t);return v(n,([i,s,c])=>a("div",{css:{color:"#ccc",fontSize:"0.8em"}},i.map(o=>a(It,{key:JSON.stringify(o),effect:o,unitNumber:c,area:s}))))},Bt={fontSize:"1.2em",color:"#ccc"},Fe={fontSize:"1.2em",fontWeight:"bold"},_e={...Bt,display:"inline-block",width:"4em"},qe={fontSize:"1.2em","& > .badge":{whiteSpace:"normal"}},ve=({children:e,...t})=>a(Te,{...t,fluid:!0,css:{padding:0}},e),Lt=({skillType:e,unit:t})=>{const n=et(e,t);return a("div",{css:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},title:n},n)},jt=({skillType:e,unit:t})=>{const n=tt(e,t);return a("span",{css:{...Fe,color:"#0af"}},n)},yt=({skillType:e,unit:t})=>{const n=at(e,t);return a("span",{css:{...Fe,color:"#cc0"}},n)},Mt=({skillType:e,unit:t})=>{const{t:n}=d(),i=nt(e,t);return h(i,a("div",{css:qe},a(Z,{variant:"rank-up-skill"},n("skill.rank_up"))))},zt=({skillType:e,unit:t})=>{const{t:n}=d(),i=it(e,t);return v(i,s=>a("div",{css:qe},a(Z,{variant:"secondary"},n(`effect:form.${s}`))))},Gt=[10,9,8,7,6,5,4,3,2,1],Ht=({skillType:e,unit:t})=>{const{t:n}=d(),[i,s]=st(e,t);return a("div",{css:{display:"flex",userSelect:"none","& > .dropdown.numeric":{flexShrink:0,width:70}}},a("span",{css:{marginRight:5}},n("lv")),a(ct,{id:"skill-lv-dropdown",items:Gt,value:i,onChange:s}))},U=({eventKey:e})=>{const{t}=d(),n=Ye();return a(H.Pane,{eventKey:e},v(n,i=>a(Te,{fluid:!0,css:{paddingTop:5}},a(B,{css:{fontSize:"1.4em",color:"#eee"}},a(T,{xs:8,sm:9},a(Lt,{skillType:e,unit:i})),a(T,{xs:4,sm:3},a(Ht,{skillType:e,unit:i}))),a(B,null,a(T,{xs:{order:"last",span:12},sm:{order:"first",span:9}},a(At,{skillType:e,unit:i}),a(xt,{skillType:e,unit:i}),a(Ot,{skillType:e,unit:i})),a(T,{xs:{order:"first",span:12},sm:{order:"last",span:3}},a(ve,{css:{userSelect:"none"}},a(B,null,a(T,{xs:8,sm:12},a(ve,null,a(B,{css:{"& > div":{marginTop:5}}},a(T,{xs:{order:1,span:12},sm:{order:2,span:12}},a("span",{css:_e},t("skill.ap")),a(jt,{skillType:e,unit:i})),a(T,{xs:{order:2,span:12},sm:{order:3,span:12}},a("span",{css:_e},t("skill.range")),a(yt,{skillType:e,unit:i})),a(T,{xs:{order:3,span:12},sm:{order:1,span:12}},a(zt,{skillType:e,unit:i}),a(Mt,{skillType:e,unit:i}))))),a(T,{xs:4,sm:12,css:{"& > div":{marginTop:5}}},a("div",null,a("span",{css:{color:"#ccc"}},t("skill.area"))),a($t,{css:{width:100},skillType:e,unit:i})))))))))},Wt=()=>{const{t:e}=d(),[t,n]=ot();return v(t,i=>a("div",{css:{display:"flex",alignItems:"center",padding:"10px 8px"}},a(L,{placement:"top",overlay:a(J,{id:"tooltip-form-change"},e("form_change"))},a(lt,{"aria-label":"Change unit form",variant:"secondary",svg:a(rt,null),onClick:n})),a("span",{css:{color:"#eee",marginLeft:10}},e(`effect:form.${i.unitForm()}`))))},V=({eventKey:e,active:t,disabled:n,children:i})=>{const s=e.startsWith("active")?"active-skill":"passive-skill";return a(W.Item,null,a(W.Link,{className:s,eventKey:e,active:t,disabled:n},a("span",{css:{display:"inline-block","@media (max-width: 480px)":{width:32},"@media (min-width: 480px)":{width:50}}},i)))},Jt=()=>{const[e,t,n]=ut();return a(V,{eventKey:e,active:t,disabled:!n},n?a(Ae,{skillType:P.Active1}):a(xe,null),a("span",{className:"sr-only"},"Active skill 1"))},Kt=()=>{const[e,t,n]=dt();return a(V,{eventKey:e,active:t,disabled:!n},n?a(Ae,{skillType:P.Active2}):a(xe,null),a("span",{className:"sr-only"},"Active skill 2"))},Xt=()=>{const[e,t,n]=pt();return a(V,{eventKey:e,active:t,disabled:!n},n?a(Q,{skillType:P.Passive1}):a(Y,null),a("span",{className:"sr-only"},"Passive skill 1"))},Zt=()=>{const[e,t,n]=gt();return a(V,{eventKey:e,active:t,disabled:!n},n?a(Q,{skillType:P.Passive2}):a(Y,null),a("span",{className:"sr-only"},"Passive skill 2"))},Qt=()=>{const[e,t,n]=mt();return a(V,{eventKey:e,active:t,disabled:!n},n?a(Q,{skillType:P.Passive3}):a(Y,null),a("span",{className:"sr-only"},"Passive skill 3"))},aa=e=>{const[t,n]=ft();return a("div",{...e},a(Wt,null),a(H.Container,{id:"unit-skill-viewer",activeKey:t,onSelect:i=>{n(i??void 0)}},a(W,{variant:"tabs",className:`skill ${t?t.startsWith("active")?"active-skill":"passive-skill":""}`},a(Jt,null),a(Kt,null),a(Xt,null),a(Zt,null),a(Qt,null)),a(H.Content,{css:{minHeight:300}},a(U,{eventKey:"active1"}),a(U,{eventKey:"active2"}),a(U,{eventKey:"passive1"}),a(U,{eventKey:"passive2"}),a(U,{eventKey:"passive3"}))))};export{aa as default};
